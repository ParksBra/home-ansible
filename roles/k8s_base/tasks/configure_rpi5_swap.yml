- name: install common swap package
  apt:
    name: dphys-swapfile
    state: present
  become: true

- name: ensure rpi-swap is removed
  apt:
    name: rpi-swap
    state: absent
  become: true

- name: disable swap service
  service:
    name: dphys-swapfile
    enabled: false
    masked: true
    state: stopped
  become: true

- name: mask swap in systemd
  systemd:
    name: dev-zram0.swap
    masked: true
  become: true

- name: disable swap
  shell: swapoff --all
  become: true
